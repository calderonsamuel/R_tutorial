<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Basicos_R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Tutorials</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="Descriptives.html">
    <span class="fa fa-newspaper-o"></span>
     
    Descriptives
  </a>
</li>
<li>
  <a href="Curso1.html">
    <span class="fa fa-newspaper-o"></span>
     
    ALACIP
  </a>
</li>
<li>
  <a href="hw.html">
    <span class="fa fa-newspaper-o"></span>
     
    Hello
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Basicos_R</h1>

</div>


<div id="tabla-de-contenidos" class="section level1">
<h1>Tabla de Contenidos</h1>
<p>Parte I:</p>
<ul>
<li><a href="#T1">Descargando e instalando R</a></li>
<li><a href="#T2">La consola de R y comandos basicos</a></li>
<li><a href="#T3">Subiendo una base de datos</a></li>
</ul>
<p>Parte II: Manipular y limpiar base de datos</p>
<ul>
<li>Recode</li>
<li>Rename y re label</li>
<li>gen variable (categorica, dicotomica, average de grupo)</li>
<li>Missing – finding them (no sean en 0s si se grabo asi – a missing )</li>
</ul>
<p>Parte III: Estadisticos descriptivos</p>
<ul>
<li>Media, mediana, moda, SD</li>
<li>Graficos simples de distribucion</li>
<li>Percentiles</li>
<li>Dos variables – diferencia de medias, correlaciones, GRaficosde distribucion y correlacion</li>
</ul>
<p>Parte IV: Analisis y Graficos</p>
<ul>
<li>Regresion simple y diagnostico</li>
<li>Graficos de ajustes de regresion</li>
<li>Controlando por otras variables</li>
<li>Cluster SE</li>
<li>Efectos fijos</li>
<li>Probit/logit – odss ratio y marginal efects</li>
</ul>
<div id="parte-i-basicos-del-r" class="section level2">
<h2>Parte I: Basicos del R</h2>
<div id="subiendo-una-base-de-datos" class="section level3">
<h3>Subiendo una base de datos <a name="T3"></a></h3>
<p>Para subir una base de datos (BD), debes antes haber instalado una serie de paquetes que permiten leer la base de datos sin importar en que formato este. R puede leer BD de STATA, SPSS, Excel, R, etc.</p>
<p>El primer paquete que debemos instalar es Rio. Rio nos permite abrir distintos tipos de base de datos con facilidad.</p>
<pre class="r"><code>install.packages(&quot;rio&quot;)</code></pre>
<pre class="r"><code>library(rio)</code></pre>
<p>Segundo, llamamos a nuestra base de datos. Procuramos tener la base de datos en nuestro espacio de trabajo. La Base de Datos que usaremos es una muestra de la ENAHO - PERU (Encuesta Nacional de Hogares del Peru) del 2017. Para facilidad del ejercicio, hemos tomado solo a los jefes de hogar de Lima Metropolitana. Tenemos informacion sobre su etnicidad, nivel educativo, ingresos y empleo.</p>
<p>Dado que tenemos el paquete rio, no necesitamos decirle a R que nuestra base de datos esta en STATA, R lo entiende.</p>
<p>Vamos a usar el comando import y asignarle un nombre a nuestra base de datos como hicimos al inicio. Lo llamaremos Ej_Enaho. Abajo podemos ver las primeras 4 variables y primeras 10 observaciones.</p>
<pre class="r"><code>Ej_Enaho&lt;-import(&quot;./data_examples/Ejercicio_Enaho2017.dta&quot;)
head(Ej_Enaho[,1:5],10)</code></pre>
<pre><code>##    ubigeo percepho mieperho totmieho  ingmo1hd
## 1  050406        4        5        5  5435.000
## 2  230108        4        4        4 38651.000
## 3  050901        2        4        6  6921.333
## 4  040102        2        3        3 97990.000
## 5  110305        2        5        5 23876.000
## 6  120303        2        2        2 17663.000
## 7  200701        2        2        2 31599.000
## 8  022001        5        6        6  9459.000
## 9  060601        1        2        2  5084.000
## 10 190113        2        3        3 18920.000</code></pre>
<p>Siempre es bueno mirar la base de datos con la cual estamos trabajando para darnos una idea mas concreta de que estamos haciendo. Para hacer ello, usamos el comando View y llamamos nuestra base de datos. Tenemos una base de datos manejable, pero si es que tuvieramos una de 50 000 observaciones o mas? Podriamos mirar una muestra de nuestra base de datos con la opcion head. Abajo, le pedimos que nos puestre las 300 primeras observaciones. Arriba le pedimos que nos muestre de las variables 1 a 5, las 10 primeras observaciones.</p>
<pre class="r"><code>View(Ej_Enaho)
View(head(Ej_Enaho,300))</code></pre>
</div>
</div>
<div id="parte-ii-manipular-y-limpiar-base-de-datos" class="section level2">
<h2>Parte II: Manipular y limpiar base de datos</h2>
<p>En esta secciones aprenderemos algunas de los pasos mas frecuentes que hacemos al encontrarnos con una nueva base de datos: limpiar y manipular algunas variables para que pueda analizarse. Debemos limpiar nuestra base de datos por muchas razones; quizas para calcular las variables que queremos, para desacernos de grupos de observaciones que no nos interesan o para hacer mas facil el juntar nuestra base de datos con otras.</p>
<p>Vamos a utilizar el paquete “Hmisc” y el paquete “ipumsr” que nos facilitan renombrar y etiquetar variables.</p>
<pre class="r"><code>#install.packages(&quot;Hmisc&quot;)
library(Hmisc)
#install.packages(&quot;ipumsr&quot;)
library(ipumsr)</code></pre>
<div id="re-nombrar-y-etiquetar-variables" class="section level3">
<h3>Re-nombrar y etiquetar variables</h3>
<p>Vamos a empezar cambiando el nombre de algunas de nuestras variables. Vemos nuestras variables en la BD con el comando List (ls).</p>
<pre class="r"><code>ls(Ej_Enaho)</code></pre>
<pre><code>##  [1] &quot;age&quot;                &quot;age_bra&quot;            &quot;anos_educ&quot;         
##  [4] &quot;educ_ano&quot;           &quot;educ_estatal&quot;       &quot;educ_grado&quot;        
##  [7] &quot;educ_nivel&quot;         &quot;emplpsec&quot;           &quot;estrsocial&quot;        
## [10] &quot;Ethnicity&quot;          &quot;fac500a&quot;            &quot;factor07&quot;          
## [13] &quot;Female&quot;             &quot;gashog1d&quot;           &quot;gashog2d&quot;          
## [16] &quot;inghog1d&quot;           &quot;inghog2d&quot;           &quot;ingmo1hd&quot;          
## [19] &quot;ingmo2hd&quot;           &quot;ingresos_mens_indv&quot; &quot;ingresos_mensual&quot;  
## [22] &quot;ld&quot;                 &quot;lengua_mat&quot;         &quot;mieperho&quot;          
## [25] &quot;ocupinf&quot;            &quot;p207&quot;               &quot;p208a&quot;             
## [28] &quot;p209&quot;               &quot;p314d&quot;              &quot;p501&quot;              
## [31] &quot;p502&quot;               &quot;p503&quot;               &quot;p507&quot;              
## [34] &quot;p510&quot;               &quot;p511a&quot;              &quot;p545&quot;              
## [37] &quot;p549&quot;               &quot;p558c&quot;              &quot;p558d&quot;             
## [40] &quot;p558d1&quot;             &quot;p558e1&quot;             &quot;p558e2&quot;            
## [43] &quot;p558e3&quot;             &quot;p558e4&quot;             &quot;p558e5&quot;            
## [46] &quot;p558e6&quot;             &quot;p558f&quot;              &quot;percepho&quot;          
## [49] &quot;pobreza&quot;            &quot;t546&quot;               &quot;t549&quot;              
## [52] &quot;t556&quot;               &quot;t5587a&quot;             &quot;t558c&quot;             
## [55] &quot;totmieho&quot;           &quot;ubigeo&quot;</code></pre>
<p>Describamos la variable “ocupinf”. Vemos su etiqueta, los valores que toma (1/2) y su media.</p>
<pre class="r"><code>#describe(Ej_Enaho$ocupinf)</code></pre>
<p>Digamos que queremos cambiar el nombre de la variable “ocupinf” a “emp_formal”. Para ello usamos la funcion names. Le decimos a R que en donde encuentre el nombre “ocupinf” lo reemplaze por “emp_formal”. Ahora miramos la lista de variables de nuevo y vemos que cambio a “emp_formal”.</p>
<pre class="r"><code>names(Ej_Enaho)[names(Ej_Enaho) == &quot;ocupinf&quot;] &lt;- &quot;empl_formal&quot;
ls(Ej_Enaho)</code></pre>
<pre><code>##  [1] &quot;age&quot;                &quot;age_bra&quot;            &quot;anos_educ&quot;         
##  [4] &quot;educ_ano&quot;           &quot;educ_estatal&quot;       &quot;educ_grado&quot;        
##  [7] &quot;educ_nivel&quot;         &quot;empl_formal&quot;        &quot;emplpsec&quot;          
## [10] &quot;estrsocial&quot;         &quot;Ethnicity&quot;          &quot;fac500a&quot;           
## [13] &quot;factor07&quot;           &quot;Female&quot;             &quot;gashog1d&quot;          
## [16] &quot;gashog2d&quot;           &quot;inghog1d&quot;           &quot;inghog2d&quot;          
## [19] &quot;ingmo1hd&quot;           &quot;ingmo2hd&quot;           &quot;ingresos_mens_indv&quot;
## [22] &quot;ingresos_mensual&quot;   &quot;ld&quot;                 &quot;lengua_mat&quot;        
## [25] &quot;mieperho&quot;           &quot;p207&quot;               &quot;p208a&quot;             
## [28] &quot;p209&quot;               &quot;p314d&quot;              &quot;p501&quot;              
## [31] &quot;p502&quot;               &quot;p503&quot;               &quot;p507&quot;              
## [34] &quot;p510&quot;               &quot;p511a&quot;              &quot;p545&quot;              
## [37] &quot;p549&quot;               &quot;p558c&quot;              &quot;p558d&quot;             
## [40] &quot;p558d1&quot;             &quot;p558e1&quot;             &quot;p558e2&quot;            
## [43] &quot;p558e3&quot;             &quot;p558e4&quot;             &quot;p558e5&quot;            
## [46] &quot;p558e6&quot;             &quot;p558f&quot;              &quot;percepho&quot;          
## [49] &quot;pobreza&quot;            &quot;t546&quot;               &quot;t549&quot;              
## [52] &quot;t556&quot;               &quot;t5587a&quot;             &quot;t558c&quot;             
## [55] &quot;totmieho&quot;           &quot;ubigeo&quot;</code></pre>
<p>Queremos cambiar la etiqueta de esta variable para que no tenga typos y este mejor explicada:</p>
<pre class="r"><code>label(Ej_Enaho$empl_formal) &lt;- &quot;Situacion de informalidad en la ocup.principal&quot;
describe(Ej_Enaho$empl_formal)</code></pre>
<pre><code>## Ej_Enaho$empl_formal : Situacion de informalidad en la ocup.principal  Format:%8.0g 
##        n  missing distinct     Info     Mean      Gmd 
##      839      161        2    0.575    1.259   0.3839 
##                       
## Value          1     2
## Frequency    622   217
## Proportion 0.741 0.259</code></pre>
</div>
<div id="recodificar-variables" class="section level3">
<h3>Recodificar variables</h3>
<p>Ahora recodificaremos los valores de la variable con que estamos trabajando.</p>
<p>Usamos la funcion abajo para ver los valores y las etiquetas de la variable que creamos.</p>
<pre class="r"><code>ipums_val_labels(Ej_Enaho$empl_formal)</code></pre>
<pre><code>## # A tibble: 2 x 2
##     val lbl            
##   &lt;dbl&gt; &lt;chr&gt;          
## 1     1 empleo informal
## 2     2 empleo formal</code></pre>
<p>Vemos que 1=empleo informal y 2=empleo formal. Como nuestra variable se llama empl_formal, queremos que tome valor de 1 si la persona tiene empleo formal y 0 de otro modo.</p>
<pre class="r"><code>Ej_Enaho$empl_formal[Ej_Enaho$empl_formal==1] &lt;- 0 #Si la variable tiene valor de 1, reemplazalo por 0
Ej_Enaho$empl_formal[Ej_Enaho$empl_formal==2] &lt;- 1 #Si la variable tiene valor de 2, reemplazalo por 1</code></pre>
<p>Ahora podemos usar esta variable con mucha mas facilidad. Por ejemplo, podemos tomar el promedio e interpretarlo. Vemos que alrededor del 50% de nuestros informantes tiene empleo formal.</p>
<pre class="r"><code>describe(Ej_Enaho$empl_formal)</code></pre>
<pre><code>## Ej_Enaho$empl_formal : Situacion de informalidad en la ocup.principal  Format:%8.0g 
##        n  missing distinct     Info      Sum     Mean      Gmd 
##      839      161        2    0.575      217   0.2586   0.3839</code></pre>
</div>
</div>
<div id="generar-variables-categorica-dicotomica-average-de-grupo" class="section level2">
<h2>Generar variables (categorica, dicotomica, average de grupo)</h2>
<p>Ahora vamos a generar distintos tipos de variables. Empecemos con una variable dicotomica. Vamos a usar informacion sobre la etnicidad reportada de los informantes.</p>
<pre class="r"><code>#describe(Ej_Enaho$p558c)
ipums_val_labels(Ej_Enaho$p558c)</code></pre>
<pre><code>## # A tibble: 9 x 2
##     val lbl                                                            
##   &lt;dbl&gt; &lt;chr&gt;                                                          
## 1     1 quechua                                                        
## 2     2 aymara                                                         
## 3     3 &quot;nativo o ind\xedgena de la amazon\xeda&quot;                       
## 4     4 negro/moreno/zambo/mulato/afroperuano                          
## 5     5 blanco                                                         
## 6     6 mestizo                                                        
## 7     7 otro                                                           
## 8     8 no sabe                                                        
## 9     9 &quot;perteneciente o parte de otro pueblo ind\xedgena u originario&quot;</code></pre>
</div>
<div id="variable-binaria" class="section level2">
<h2>Variable binaria</h2>
<p>Generemos una variable que toma el valor de 1 si es que el informante pertenece a un pueblo indigena y 0 si es que no. Creamos una variable vacia y le incluimos los argumentos:</p>
<pre class="r"><code>Ej_Enaho$indigena&lt;- NA
Ej_Enaho[Ej_Enaho$p558c%in%c(1:3,9), ]$indigena &lt;- 1 #Si le pregunta p558c es 1,2,3 o 9, toma valor de 1
Ej_Enaho[Ej_Enaho$p558c%in%c(4,5,6,7,8), ]$indigena&lt;-0 #Si le pregunta p558c es 4,5,6,7 o 8, toma valor de 0</code></pre>
<p>Otra opcion es usar el comando ifelse:</p>
<pre class="r"><code>#Ej_Enaho$indigena&lt;-ifelse(Ej_Enaho$p558c%in%c(1:3,9),1,0)</code></pre>
<p>Ahora miramos nuestra variable Indigena:</p>
<pre class="r"><code>table(Ej_Enaho$indigena)</code></pre>
<pre><code>## 
##   0   1 
## 683 317</code></pre>
<pre class="r"><code>summary(Ej_Enaho$indigena)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.317   1.000   1.000</code></pre>
</div>
<div id="variable-categorica" class="section level2">
<h2>Variable categorica</h2>
<p>Ahora crearemos una variable que incluya varios valores de etnicidad, pero menos que la pregunta original:</p>
<pre class="r"><code>Ej_Enaho$etnicidad&lt;- NA
Ej_Enaho[Ej_Enaho$p558c%in%c(6), ]$etnicidad &lt;- 1 #Si le pregunta p558c es 6 (mestizo), toma valor de 1
Ej_Enaho[Ej_Enaho$p558c%in%c(1:3,9), ]$etnicidad &lt;- 2 #Si le pregunta p558c es 1,2,3 o 9 (indigena), toma valor de 2
Ej_Enaho[Ej_Enaho$p558c%in%c(5), ]$indigena&lt;-3 #Si le pregunta p558c es 5 (blanco), toma valor de 3
Ej_Enaho[Ej_Enaho$p558c%in%c(4), ]$indigena&lt;-4 #Si le pregunta p558c es 4 (afroperuano), toma valor de 4
Ej_Enaho[Ej_Enaho$p558c%in%c(7,8), ]$indigena&lt;-5 #Si le pregunta p558c es 7,8 (NS/Otro), toma valor de 5</code></pre>
<p>Ahora miramos nuestra variable Indigena:</p>
<pre class="r"><code>table(Ej_Enaho$etnicidad)</code></pre>
<pre><code>## 
##   1   2 
## 469 317</code></pre>
<pre class="r"><code>summary(Ej_Enaho$etnicidad)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   1.000   1.000   1.403   2.000   2.000     214</code></pre>
</div>
<div id="add-incio-missing-finding-them-no-sean-en-0s-si-se-grabo-asi-a-missing" class="section level2">
<h2>ADD INCIO: Missing – finding them (no sean en 0s si se grabo asi – a missing )</h2>
</div>
<div id="parte-iii-descripcion-y-graficos-basicos" class="section level2">
<h2>Parte III: Descripcion y graficos basicos</h2>
<div id="descripcion-de-una-variable" class="section level3">
<h3>Descripcion de una variable</h3>
<p>Ahora haremos un poco de estadistica descriptiva basica. Hemos estado usando el comando describe bastate, es porque este comando nos da la informacion descriptiva basica de cada variable.</p>
<p>Usemos la ingresos_mensual (expresada en nuevos soles – 1$=~3.3 soles):</p>
<pre class="r"><code>describe(Ej_Enaho$ingresos_mens_indv)</code></pre>
<pre><code>## Ej_Enaho$ingresos_mens_indv  Format:%9.0g 
##        n  missing distinct     Info     Mean      Gmd      .05      .10 
##      999        1      999        1     1344     1217    231.8    294.8 
##      .25      .50      .75      .90      .95 
##    520.5    934.4   1633.6   2863.4   3865.1 
## 
## lowest :   106.1102   108.3003   111.2335   114.3772   115.8035
## highest:  7528.4268  9519.0254  9576.0771 11550.4170 13951.2227</code></pre>
<p>Tambien podemos pedir la informacion de forma independiente:</p>
<pre class="r"><code>mean(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE) #Usamos el argumento na.rm=TRUE para decir que nos de el resultado aunque haya missing values. Si no ponemos el argumento no sale.</code></pre>
<pre><code>## [1] 1344.345</code></pre>
<pre class="r"><code>sd(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE)</code></pre>
<pre><code>## [1] 1327.231</code></pre>
<pre class="r"><code>median(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE)</code></pre>
<pre><code>## [1] 934.373</code></pre>
<p>Podemos guardar la informacion de las medidas de tendencia central en una nueva variable:</p>
<pre class="r"><code>mean_ingresos&lt;-mean(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE)
sd_ingresos&lt;-sd(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE)
median_ingresos&lt;-median(Ej_Enaho$ingresos_mens_indv,na.rm=TRUE)</code></pre>
<p>Podemos tambien sacar los percentiles de nuestra distribucion:</p>
<pre class="r"><code>quantile(Ej_Enaho$ingresos_mens_indv, na.rm = TRUE)</code></pre>
<pre><code>##         0%        25%        50%        75%       100% 
##   106.1102   520.5331   934.3730  1633.5743 13951.2227</code></pre>
</div>
</div>
<div id="add-incio-crear-variable-que-tome-1-si-es-que-estan-en-el-25-superior-de-riqueza" class="section level2">
<h2>ADD INCIO: crear variable que tome 1 si es que estan en el 25% superior de riqueza</h2>
<p>Ahora haremos unos graficos simples de distribucion. Para ellos instalaremos el paquete ggplot2. Recomendamos usar esta cartilla de referencia: <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="uri">https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf</a></p>
<pre class="r"><code>#install.packages(&quot;ggplot2&quot;)
library(ggplot2)</code></pre>
<p>Empecemos con el grafico mas basico:</p>
<pre class="r"><code>plot(Ej_Enaho$ingresos_mens_indv)</code></pre>
<p><img src="Curso1_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Ahora haremos un histograma:</p>
<pre class="r"><code>hist(Ej_Enaho$ingresos_mens_indv)</code></pre>
<p><img src="Curso1_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>Es dificil visualizar la distribucion de la data porque esta muy dispersa, podemos seleccionar solo mirar los valores del 75% inferior hacia abajo:</p>
</div>
<div id="add-grafico-limitado-y-mas-opciones-de-grafico" class="section level2">
<h2>ADD : GRAFICO LIMITADO y mas opciones de grafico</h2>
<div id="descripcion-de-dos-variables" class="section level3">
<h3>Descripcion de dos variables</h3>
<p>Ahora haremos estadistica descriptiva de dos variables.</p>
<p>Veamos la relacion entre nivel educativo e ingresos mensuales. Primero miremos la variable nivel educativo:</p>
<pre class="r"><code>summary(Ej_Enaho$educ_nivel)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   4.000   5.000   5.299   6.000  11.000       1</code></pre>
<pre class="r"><code>ipums_val_labels(Ej_Enaho$educ_nivel) # Vemos que tiene una escala ordina (12 no tiene valores)</code></pre>
<pre><code>## # A tibble: 12 x 2
##      val lbl                                 
##    &lt;dbl&gt; &lt;chr&gt;                               
##  1     1 sin nivel                           
##  2     2 &quot;educaci\xf3n inicial&quot;              
##  3     3 primaria incompleta                 
##  4     4 primaria completa                   
##  5     5 secundaria incompleta               
##  6     6 secundaria completa                 
##  7     7 superior no universitaria incompleta
##  8     8 superior no universitaria completa  
##  9     9 superior universitaria incompleta   
## 10    10 superior universitaria completa     
## 11    11 postgrado universitario             
## 12    12 &quot;b\xe1sica especial&quot;</code></pre>
<pre class="r"><code>table(Ej_Enaho$educ_nivel)</code></pre>
<pre><code>## 
##   1   3   4   5   6   7   8   9  10  11 
##  60 188 185 110 232  28  76  31  74  15</code></pre>
<p>A continuacion, cruzamos ambas variables. Emplezamos con correlaciones:</p>
<pre class="r"><code>cor(Ej_Enaho$ingresos_mens_indv,Ej_Enaho$educ_nivel)</code></pre>
<pre><code>## [1] NA</code></pre>
<p>ADD :Ahora hacemos una diferencia de medias</p>
<p>Ahora hacemos un grafico de distribucion bivariado:</p>
<pre class="r"><code>plot(Ej_Enaho$ingresos_mens_indv,Ej_Enaho$educ_nivel)</code></pre>
<p><img src="Curso1_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
<div id="parte-iv-analisis" class="section level2">
<h2>Parte IV: Analisis</h2>
<p>Para el analisis, usaremos la variable ingresos como la variable dependiente y educacion como la variable independiente.</p>
<ul>
<li>Regresion simple y diagnostico</li>
</ul>
<pre class="r"><code>OLS_1 &lt;- lm(ingresos_mens_indv ~ educ_nivel, data=Ej_Enaho)
summary(OLS_1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = ingresos_mens_indv ~ educ_nivel, data = Ej_Enaho)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2058.5  -599.1  -211.0   316.4 11515.3 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  -219.51      86.54  -2.536   0.0113 *  
## educ_nivel    295.05      14.88  19.831   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1125 on 996 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.2831, Adjusted R-squared:  0.2823 
## F-statistic: 393.3 on 1 and 996 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>coefficients(OLS_1) # model coefficients</code></pre>
<pre><code>## (Intercept)  educ_nivel 
##   -219.5134    295.0452</code></pre>
<pre class="r"><code>confint(OLS_1, level=0.95) # CIs for model parameters </code></pre>
<pre><code>##                 2.5 %    97.5 %
## (Intercept) -389.3410 -49.68588
## educ_nivel   265.8489 324.24142</code></pre>
<pre class="r"><code>#fitted(OLS_1) # predicted values
#residuals(OLS_1) # residuals
anova(OLS_1) # anova table </code></pre>
<pre><code>## Analysis of Variance Table
## 
## Response: ingresos_mens_indv
##             Df     Sum Sq   Mean Sq F value    Pr(&gt;F)    
## educ_nivel   1  497606163 497606163  393.26 &lt; 2.2e-16 ***
## Residuals  996 1260288670   1265350                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>vcov(OLS_1) # covariance matrix for model parameters </code></pre>
<pre><code>##             (Intercept) educ_nivel
## (Intercept)    7489.691 -1173.5705
## educ_nivel    -1173.570   221.3614</code></pre>
<pre class="r"><code>#influence(OLS_1) # regression diagnostics</code></pre>
<ul>
<li><p>Graficos de ajustes de regresion</p></li>
<li><p>Controlando por otras variables</p></li>
<li><p>Cluster SE OLS_3 &lt;- lm(ingresos_mens_indv ~ educ_nivel, data=Ej_Enaho)</p></li>
<li><p>Efectos fijos</p></li>
<li><p>Probit/logit – odss ratio y marginal efects</p></li>
</ul>
<p>(regresiones de paper mody)</p>
</div>
<div id="tema2" class="section level2">
<h2>Tema2 <a name="T2"></a></h2>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:</p>
<pre class="r"><code>summary(cars)</code></pre>
<pre><code>##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00</code></pre>
</div>
<div id="tema3" class="section level2">
<h2>Tema3 <a name="T3"></a></h2>
</div>
<div id="section" class="section level2">
<h2></h2>
</div>
<div id="section-1" class="section level2">
<h2></h2>
</div>
<div id="section-2" class="section level2">
<h2></h2>
</div>
<div id="section-3" class="section level2">
<h2></h2>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
